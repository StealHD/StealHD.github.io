[{"title":"Installing Oracle GoldenGate","path":"/2024/05/15/Installing-Oracle-GoldenGate/","content":"Installing Oracle GoldenGate 21需求：同步oracle（192.168.192.119源端）表hc.test 至oracle（192.168.192.119目标端）表hc.test ，采用集成模式，无ddl同步。 已安装oracle 11.2.0.4.0。 数据库前置操作 开归档 12345678# 源端目标端都需要 需要重启数据库SQL&gt; archive log list;Database log mode Archive ModeAutomatic archival Enabled # 开启Archive destination USE_DB_RECOVERY_FILE_DESTOldest online log sequence 5Next log sequence to archive 7Current log sequence 7 开启附加日志&#x2F;开启复制参数&#x2F;配置STREAMS_POOL_SIZE 123456789101112131415161718192021# 源端目标端都需要SELECT supplemental_log_data_min, force_logging FROM v$database;# YES 为已经开启#SUPPLEME FOR#-------- ---#YES YESalter database add SUPPLEMENTAL LOG DATA;ALTER DATABASE FORCE LOGGING;# 开启复制参数alter system set enable_goldengate_replication=true;#sho parameter enable_goldengate_replication#NAME TYPE VALUE#------------------------------------ ----------- ------------------------------#enable_goldengate_replication boolean TRUE#配置STREAMS_POOL_SIZEALTER SYSTEM SET STREAMS_POOL_SIZE = 128M scope=both; 创建ogg用户授权 1234567891011121314151617181920212223242526272829303132333435363738394041#源端# 需要修改自己的路径create tablespace ogg_data datafile &#x27;/u01/app/oracle/oradata/orcl/ogg_data.dbf&#x27; size 200m autoextend on;create user oggadmin identified by oggadmin default tablespace ogg_data;GRANT CONNECT TO oggadmin;GRANT CREATE SESSION TO oggadmin;GRANT ALTER SESSION TO oggadmin;GRANT RESOURCE TO oggadmin;GRANT SELECT ANY DICTIONARY TO oggadmin;GRANT SELECT ANY TABLE TO oggadmin;GRANT FLASHBACK ANY TABLE TO oggadmin;GRANT ALTER ANY TABLE TO oggadmin;#同步测试表create user hc identified by hc;grant dba to hc;create table hc.test (id number(20),name varchar2(20));# 目标端create tablespace ogg_data datafile &#x27;/u01/app/oracle/oradata/orcl/ogg_data.dbf&#x27; size 200m autoextend on;create user oggadmin identified by oggadmin default tablespace ogg_data;GRANT ALTER SESSION TO oggadmin;GRANT CREATE SESSION TO oggadmin;GRANT CONNECT TO oggadmin;GRANT RESOURCE TO oggadmin;GRANT SELECT ANY DICTIONARY TO oggadmin;GRANT SELECT ANY TABLE TO oggadmin;GRANT FLASHBACK ANY TABLE TO oggadmin;GRANT INSERT ANY TABLE TO oggadmin;GRANT UPDATE ANY TABLE TO oggadmin;GRANT DELETE ANY TABLE TO oggadmin;#同步测试表create user hc identified by hc;grant dba to hc;create table hc.test (id number(20),name varchar2(20)); OGG-02912 处理 12345678910111213141516171819202122232425262728293031323334353637383940414243# ogg 安装目录cd /home/oracle/ogg[oracle@oracle2 ogg]$ sqlplus / as sysdbaSQL*Plus: Release 11.2.0.4.0 Production on Thu May 16 14:18:41 2024Copyright (c) 1982, 2013, Oracle. All rights reserved.Connected to:Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing optionsSQL&gt; @prvtlmpg.plbOracle GoldenGate Workaround prvtlmpgThis script provides a temporary workaround for bug 17030189.It is strongly recommended that you apply the official OraclePatch for bug 17030189 from My Oracle Support instead of usingthis workaround.This script must be executed in the mining database of IntegratedCapture. You will be prompted for the username of the mining user.Use a double quoted identifier if the username is case sensitiveor contains special characters. In a CDB environment, this scriptmust be executed from the CDB$ROOT container and the mining usermust be a common user.=========================== WARNING ==========================You MUST stop all Integrated Captures that belong to this mininguser before proceeding!================================================================Enter Integrated Capture mining user: oggadminInstalling workaround...No errors.No errors.No errors.Installation completed.SQL&gt; 图形化安装ogg 21下载213000_fbo_ggs_Linux_x64_Oracle_shiphome.zip（https://www.oracle.com/middleware/technologies/goldengate-downloads.html# ） 注:数据库安装可以看 文章 centos 7 oracle11g install 解压ogg123456789101112# 创建ogg安装目录cd &amp;&amp; mkdir ogg &amp;&amp; cd# ogg在/home/oracle目录下 解压oggunzip unzip 213000_fbo_ggs_Linux_x64_Oracle_shiphome.zipcd fbo_ggs_Linux_x64_Oracle_shiphome/Disk1/# 192.168.192.1 是填写本机同网段ipDISPLAY=192.168.192.1:0.0; export DISPLAY# 处理中文乱码export LC_ALL=en_UScd fbo_ggs_Linux_x64_Oracle_shiphome/Disk1/# 图形化安装ogg./runInstaller 安装完成。 配置ogg123456789101112131415161718192021# 添加export TNS_ADMIN=$ORACLE_HOME/network/adminsu - oraclevim .bash_profile# 添加export TNS_ADMIN=$ORACLE_HOME/network/admin# ogg 安装目录cd /home/oracle/ogg &amp;&amp; ./ggsci# add credentialstore GGSCI（oracle，作为 oggadmin@orcl） 20&gt; add credentialstore GGSCI（oracle，作为 oggadmin@orcl） 20&gt; alter credentialstore add user oggadmin@192.168.192.119:1521/orcl, password oggadmin alias ggs GGSCI（oracle，作为 oggadmin@orcl） 20&gt; alter credentialstore add user oggadmin@192.168.192.200:1521/orcl, password oggadmin alias ggt# 验证info credentialstore GGSCI（oracle，作为 oggadmin@orcl） 20&gt; info credentialstore #GGSCI（oracle，作为 oggadmin@orcl） 10&gt; info credentialstore#正在从身份证明存储中读取：#默认域：OracleGoldenGate# 别名：ggs# 用户 ID：oggadmin@192.168.192.119:1521/orcl# 别名：ggt# 用户 ID：oggadmin@192.168.192.200:1521/orcl 配置mgr进程123456GGSCI（oracle，作为 oggadmin@orcl） 11&gt; EDIT params mgrPORT 7809AUTORESTART ER *,RETRIES 5,WAITMINUTES 1,RESETMINUTES 60PURGEOLDEXTRACTS ./dirdat/*,usecheckpoints, minkeepdays 15 配置源端抽取进程123456789101112131415161718192021222324252627282930# 添加附加日志 测试表GGSCI（oracle，作为 oggadmin@orcl） 13&gt; add trandata hc.testGGSCI（oracle，作为 oggadmin@orcl） 13&gt; EDIT params extEXTRACT extUSERIDALIAS ggsTRANLOGOPTIONS INTEGRATEDPARAMS (PARALLELISM 8)TRANLOGOPTIONS INTEGRATEDPARAMS (_LOGMINER_READ_BUFFERS 256)--TRANLOGOPTIONS INTEGRATEDPARAMS (max_sga_size 200, parallelism 1)STATOPTIONS REPORTFETCHLOGALLSUPCOLSNOCOMPRESSUPDATESUPDATERECORDFORMAT FULL--UPDATERECORDFORMAT COMPACTDBOPTIONS ALLOWUNUSEDCOLUMNTRANLOGOPTIONS EXCLUDEUSER oggadminFETCHOPTIONS NOUSESNAPSHOTEXTTRAIL ./dirdat/ie--DISCARDFILE ./dirrpt/ext1.dsc, PURGE, MEGABYTES 1024DISCARDFILE ./dirrpt/ext1.dsc, APPEND, MEGABYTES 1024WARNLONGTRANS 1H, CHECKINTERVAL 5MCACHEMGR CACHESIZE 1024MB, CACHEDIRECTORY ./dirtmptable hc.test;# 添加进程GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD EXTRACT ext INTEGRATED TRANLOG BEGIN NOW GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD EXTTRAIL ./dirdat/ie EXTRACT ext MEGABYTES 1024 #注册进程GGSCI（oracle，作为 oggadmin@orcl） 20&gt; REGISTER EXTRACT ext DATABASE 配置应用进程123456789101112131415161718192021222324252627282930313233343536GGSCI（oracle，作为 oggadmin@orcl） 20&gt; dblogin useridalias ggt#添加 checkpoint表GGSCI（oracle，作为 oggadmin@orcl） 20&gt; add checkpoint table oggadmin.ggs_checkpoint#配置 GLOBALSGGSCI（oracle，作为 oggadmin@orcl） 20&gt; EDIT PARAMS ./GLOBALScheckpointtable oggadmin.checkpointGGSCI（oracle，作为 oggadmin@orcl） 17&gt; edit params REPEXTREPLICAT repextUSERIDALIAS ggt--REPERROR (DEFAULT, ABEND)DISCARDFILE ./dirrpt/rep.dsc, PURGE, MEGABYTES 1024GETTRUNCATESALLOWNOOPUPDATESREPORTCOUNT EVERY 60 SECONDS, RATEREPORTROLLOVER AT 01:00DBOPTIONS ENABLE_INSTANTIATION_FILTERINGDBOPTIONS SUPPRESSTRIGGERS--DBOPTIONS DISABLECOMMITNOWAIT--MAP_PARALLELISM 4--MIN_APPLY_PARALLELISM 2--MAX_APPLY_PARALLELISM 10--SPLIT_TRANS_RECS 1000--DDL INCLUDE ALL--DDLOPTIONS REPORTMAP hc.test, TARGET hc.test;---添加进程 GGSCI（oracle，作为 oggadmin@orcl） 20&gt; ADD REPLICAT repext EXTTRAIL ./dirdat/ie checkpointtable oggadmin.checkpoint---注册进程 GGSCI（oracle，作为 oggadmin@orcl） 20&gt; dblogin useridalias ggt GGSCI（oracle，作为 oggadmin@orcl） 20&gt; register replicat repext database 测试现在可以测试了 启动进程 1234567GGSCI（oracle，作为 oggadmin@orcl） 20&gt; start *GGSCI（oracle，作为 oggadmin@orcl） 20&gt; info allMANAGER RUNNINGEXTRACT RUNNING EXT 00:00:06 00:00:06REPLICAT RUNNING REPEXT 00:00:00 00:00:03 插入数据 123insert into hc.test values(3,&#x27;c&#x27;);commit;select * from hc.test; 目标端查看 1select * from hc.test;","tags":["Oracle","Ogg"]},{"title":"centos 7 oracle11g install","path":"/2024/05/14/Oracle11g_install/","content":"Centos 7 Oracle 11g install准备所需文件 oracle 11g 文件 centos 7 iso （离线安装用） 补丁（可用可不用） 12345678910# 关闭 selinuxsudo sed -i &#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27; /etc/selinux/configsetenforce 0# 配置hosts echo &#x27;192.168.192.119 Oracle&#x27; &gt;&gt; /etc/hosts#离线安装 挂在iso 用于安装依赖 联网不用这步骤mount -o loop CentOS-7-x86_64-DVD-2009.iso /mnt/mv /etc/yum.repos.d/ /etc/yum.repos.d.bak/mkdir /etc/yum.repos.decho -e &quot;[iso] name=iso baseurl=file:///mnt/ gpgcheck=0 enabled=1&quot; | sudo tee /etc/yum.repos.d/iso.repo 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283# linux 7yum install -y binutils-*.x86_64 \\compat-libcap1-*.x86_64 \\compat-libstdc++-33-*.i686 \\compat-libstdc++-33-*.x86_64 \\gcc-*.x86_64 \\gcc-c++-*.x86_64 \\glibc-*.i686 \\glibc-*.x86_64 \\glibc-devel-*.i686 \\glibc-devel-*.x86_64 \\ksh \\libaio-*.i686 \\libaio-*.x86_64 \\libaio-devel-*.i686 \\libaio-devel-*.x86_64 \\libgcc-*.i686 \\libgcc-*.x86_64 \\libstdc++-*.i686 \\libstdc++-*.x86_64 \\libstdc++-devel-*.i686 \\libstdc++-devel-*.x86_64 \\libXi-*.i686 \\libXi-*.x86_64 \\libXtst-*.i686 \\libXtst-*.x86_64 \\make-*.x86_64 \\sysstat-*.x86_64 \\unixODBC-*.x86_64 \\unixODBC-*.i686 \\unixODBC-devel-*.x86_64 \\unixODBC-devel-*.i686 \\unzip# linux 6# yum install -y binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libgcc libstdc++ libstdc++-devel libaio libaio-devel make sysstat unixODBC-devel pdksh unziprm -rf /etc/yum.repo.d/mv /etc/yum.repos.d.bak/ /etc/yum.repos.d/# 配置oracle 用户 组groupadd oinstallgroupadd dbauseradd -g oinstall -G dba oracle# 配置资源 /etc/security/limits.confecho &#x27;oracle soft nofile 1024oracle hard nofile 65536oracle soft nproc 2047oracle hard nproc 16384oracle soft stack 10240oracle hard stack 32768&#x27; &gt;&gt; /etc/security/limits.confecho &#x27;kernel.sem = 250 32000 100 128kernel.shmall = 2097152kernel.shmmax = 536870912 # 单位B ,512M 根据自生内存修改 通常建议将其设置为系统内存的一半kernel.shmmni = 4096fs.file-max = 6815744fs.aio-max-nr = 1048576net.ipv4.ip_local_port_range = 9000 65500net.core.rmem_default = 262144net.core.rmem_max = 4194304net.core.wmem_default = 262144net.core.wmem_max = 1048576&#x27; &gt;&gt; /etc/sysctl.conf#配置生效sysctl -pmkdir -p /u01/app/chown -R oracle:oinstall /u01/app/chmod -R 775 /u01/app/unzip p13390677_112040_Linux-x86-64_1of7.zip -d /u01/unzip p13390677_112040_Linux-x86-64_2of7.zip -d /u01/chown -R oracle:oinstall /u01/databasechmod -R 775 /u01/databaseecho &#x27;export ORACLE_SID=orclexport ORACLE_BASE=/u01/app/oracleexport ORACLE_HOME=$ORACLE_BASE/product/11.2.0/dbhome_1export LD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/libexport PATH=$ORACLE_HOME/bin:$ORACLE_HOME/OPatch:$PATH&#x27; &gt;&gt; /home/oracle/.bash_profile 图形化安装oracle runInstaller123456su - oracle# 192.168.192.1 是填写本机同网段ipDISPLAY=192.168.192.1:0.0; export DISPLAY# 处理中文乱码export LC_ALL=en_US/u01/database/runInstaller 123456sed -i &#x27;s/^kernel.shmmax.*/kernel.shmmax = 1549053952/&#x27; /etc/sysctl.conf# test.conf# vim /etc/sysctl.conf# 修改完之后sysctl -p 1234567# oracle用户下sed -i &#x27;s/\\$(MK_EMAGENT_NMECTL)/\\$(MK_EMAGENT_NMECTL) -lnnz11/&#x27; /$ORACLE_HOME/sysman/lib/ins_emagent.mk#Exception String: Error in invoking target &#x27;agent nmhs&#x27; of makefile #&#x27;/u01/app/oracle/product/11.2.0/dbhome_1/sysman/lib/ins_emagent.mk&#x27;.#vi $ORACLE_HOME/sysman/lib/ins_emagent.mk |grep $(MK_EMAGENT_NMECTL)#$(MK_EMAGENT_NMECTL)#$(MK_EMAGENT_NMECTL) -lnnz11#Retry 123# root用户/u01/app/oraInventory/orainstRoot.sh/u01/app/oracle/product/11.2.0/dbhome_1/root.sh #敲个回车 1234567891011121314151617181920212223242526# 输出 [root@oracle ~]# /u01/app/oraInventory/orainstRoot.shChanging permissions of /u01/app/oraInventory.Adding read,write permissions for group.Removing read,write,execute permissions for world.Changing groupname of /u01/app/oraInventory to oinstall.The execution of the script is complete.[root@oracle ~]# /u01/app/oracle/product/11.2.0/dbhome_1/root.shPerforming root user operation for Oracle 11gThe following environment variables are set as: ORACLE_OWNER= oracle ORACLE_HOME= /u01/app/oracle/product/11.2.0/dbhome_1Enter the full pathname of the local bin directory: [/usr/local/bin]: Copying dbhome to /usr/local/bin ... Copying oraenv to /usr/local/bin ... Copying coraenv to /usr/local/bin ...Creating /etc/oratab file...Entries will be added to the /etc/oratab file as needed byDatabase Configuration Assistant when a database is createdFinished running generic part of root script.Now product-specific root actions will be performed.Finished product-specific root actions. netca12345# 监听安装netca#DISPLAY=192.168.192.1:0.0; export DISPLAY# 处理中文乱码#export LC_ALL=en_US 一路next，最后finish，可以根据需求修改监听。 dbca12345# 实例安装dbca#DISPLAY=192.168.192.1:0.0; export DISPLAY# 处理中文乱码#export LC_ALL=en_US 1# 实例id 看自己的bash_profile $ORACLE_SID 1# 显示不出 放大一下窗口 123456789101112131415161718192021222324# 测试实例sqlplus / as sysdbaselect open_mode from v$database;# 输出[oracle@oracle ~]$ sqlplus / as sysdbaSQL*Plus: Release 11.2.0.4.0 Production on Tue May 14 02:10:52 2024Copyright (c) 1982, 2013, Oracle. All rights reserved.Connected to:Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit ProductionWith the Partitioning, OLAP, Data Mining and Real Application Testing optionsSQL&gt;select open_mode from v$database;OPEN_MODE--------------------READ WRITESQL&gt;","tags":["Oracle"]},{"title":"hexo搭建部署","path":"/2024/05/08/hexo搭建/","content":"快速上手安装前所需环境介绍安装 Hexo 之前，需要确保您的 PC 中已经安装以下工具: Node.js [地址: Node.js — Run JavaScript Everywhere (nodejs.org)] Git [地址: Git (git-scm.com)] 安装hexo相关组件123456#安装完成后cnpm -v检查输出npm install -g cnpm --registry==https://registry.npm.taobao.org#安装完成后hexo -v检查输出cnpm install -g hexo-cli#之后更换主题有用npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive 建议永远安装最新版本的 Hexo。 Hexo 版本 最低兼容 Node.js 版本 6.0+ 12.13.0 5.0+ 10.13.0 4.1 - 4.2 8.10 4.0 8.6 3.3 - 3.9 6.9 3.2 - 3.3 0.12 3.0 - 3.1 0.10 or iojs 0.0.1 - 2.8 0.10 选择合适文件夹下一键部署官方参考文档 文档 | Hexo 12345#初始化hexo init npm install#启动服务 http://localhost:4000/hexo server 后记：​ 这个只是简单的部署，还要考虑网站部署，参数修改，文章维护，主题优化等各个方面来健全自己的blog。 之后陆续跟新一下内容。","tags":["Hexo"]},{"title":"Hello World","path":"/2024/05/07/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment blockquote123&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;content&#123;% endblockquote %&#125; content [author[source]] [link] [source_link_title] 警告此处为个人本题答案仅供参考，非唯一答案这是代码内容"}]